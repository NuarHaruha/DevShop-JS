(function(){window.DevShop=typeof window.DevShop==="object"?window.DevShop:{};window.DevShop.Me=function(d){for(var c in d)d.hasOwnProperty(c)&&(window.DevShop[c]=d[c]);DevShop=devshop=window.DevShop}})();(function(){DevShop.Me({SingletonFactory:function(d){var c=function(a){if(typeof a==="function")try{return new a}catch(b){}else if(typeof a==="object")return a},e=c(d.implement),a=c(d.extend),c=c(d.instance),b;for(b in a)a.hasOwnProperty(b)&&(c[b]||(c[b]=a[b]));for(b in e)if(e.hasOwnProperty(b)&&!c[b])throw d.instance+" must implement '"+b+"' "+typeof e[b];if(typeof c.initialize==="function")try{c.initialize()}catch(h){}return c}})})();(function(){DevShop.Me({Observable:function(d){return DevShop.SingletonFactory({extend:function(){this.observers=[];this.addObserver=function(c){if((typeof c==="function"||typeof c==="object")&&typeof c.notify==="function")if(this.observers.push(c),typeof c.onRegister==="function")try{c.onRegister()}catch(d){}};this.notifyObservers=function(c){for(var d=this.observers.length,a=0;a<d;a++)try{this.observers[a].notify(c,this)}catch(b){}}},instance:d})}})})();(function(){DevShop.Me({Observer:function(d){return DevShop.SingletonFactory({extend:function(){this.onRegister=function(){};this.notify=function(c,d){this.observable=d;if(typeof this[c]==="function")try{this[c]()}catch(a){}}},instance:d})}})})();(function(){DevShop.Me({EventSignal:function(){var d=[];this.addListener=function(c){typeof c==="function"&&d.push(c)};this.removeListener=function(c){for(var e=d.length,a=0;a<e;a++)d[a]===c&&d.splice(a)};this.dispatch=function(){for(var c=d.length,e=0;e<c;e++)try{d[e].apply(this,arguments)}catch(a){}}}})})();(function(){DevShop.Me({ProxyInterface:{NAME:""},MediatorInterface:{NAME:"",listNotificationInterests:function(){},handleNotification:function(){}},CommandInterface:{execute:function(){}},Proxy:function(){var d={};this.facade=null;this.setData=function(c){d=c};this.getData=function(){return d};this.onRegister=function(){};this.onRemove=function(){}},Mediator:new DevShop.Observer(function(){this.facade=null;this.onRegister=function(){};this.onRemove=function(){}}),Facade:function(){var d=new function(){var a=
{};this.facade={};this.registerProxy=function(b){b.facade=this.facade;a[b.NAME]||(a[b.NAME]=b);if(typeof b.onRegister==="function")b.onRegister()};this.retrieveProxy=function(b){return a[b]?a[b]:null};this.removeProxy=function(b){if(typeof a[b].onRemove==="function")try{a[b].onRemove()}catch(c){}a[b]=null}},c=new DevShop.Observable(function(){var a={};this.facade={};this.notification={};this.registerMediator=function(b){b.facade=this.facade;a[b.NAME]||(a[b.NAME]=b,this.addObserver(b))};this.retrieveMediator=
function(b){return a[b]?a[b]:null};this.removeMediator=function(b){if(typeof a[b].onRemove==="function")try{a[b].onRemove()}catch(c){}a[b]=null};this.notifyObservers=function(a){for(var c=this.observers.length,d=0;d<c;d++)try{for(var e=this.observers[d].listNotificationInterests(),g=!1,f=0;l=e.length,f<l;f++)if(e[f]==this.notification.name){g=!0;break}if(g)this.observers[d].notification=this.notification,this.observers[d].notify(a,this)}catch(i){}};this.sendNotification=function(a){this.notification=
a;this.notifyObservers("handleNotification")}}),e=new DevShop.Observer(function(){var a={};this.facade={};this.NAME="DevShop.Controller";this.registerCommand=function(b,c){c.facade=this.facade;a[b]||(a[b]=c)};this.listNotificationInterests=function(){return[this.facade.CMD_STARTUP]};this.handleNotification=function(){var b=this.notification;if(typeof a[b.name]==="object"&&typeof a[b.name].execute==="function")try{a[b.name].execute(b)}catch(c){}}});this.CMD_STARTUP="CMD_STARTUP";this.registerProxy=
function(a){d.registerProxy(a)};this.registerMediator=function(a){c.registerMediator(a)};this.registerCommand=function(a,b){e.registerCommand(a,b)};this.retrieveProxy=function(a){return d.retrieveProxy(a)};this.retrieveMediator=function(a){return c.retrieveMediator(a)};this.removeProxy=function(a){d.removeProxy(a)};this.removeMediator=function(a){c.removeMediator(a)};this.sendNotification=function(a,b,d){c.sendNotification({name:a,body:b,type:d})};this.initializeFacade=function(a){d.facade=a;c.facade=
a;e.facade=a;a.registerMediator(e)}}})})();
